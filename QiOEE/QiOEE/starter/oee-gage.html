<link rel="import" href="../components/polymer/polymer.html">
<link rel="import"
      href="../components/core-ajax/core-ajax.html">

<script src="http://d3js.org/d3.v3.min.js"></script>

<script src="../components/c3/c3.min.js"></script>
<!--params='{" start":"2015-02-20","stop":"2015-02-27"}'-->
<polymer-element name="oee-gage" attributes="height1 width1 gvalue label1">
    <template>
        <link href="../components/c3/c3.min.css" rel="stylesheet" type="text/css" />

        <style>
            .test{
                display:inline-block;
                width:350px; 
                margin:10px;
                background: #eaeaea;
            }
            text{
                font-family:Arial;
                font-size:medium;
            }
            .gage{
                height:300px;
            }
            slabel{
                margin:3px;
            }
       </style>
        <div class="test">
            <div class="gage" id="OEEgage"></div>
            <div id="slabel">{{label1}}</div>
        </div>

    </template>
    <script>
        Polymer({
            data: [],

            drawChart: function () {
                var OEEgage = c3.generate({
                    bindto: this.$.OEEgage,
                    data: {
                        columns: [
                            ["OEE",this.gvalue]
                        ],
                        type: 'gauge',
                        onclick: function (d, i) { console.log("onclick", d, i); },
                        onmouseover: function (d, i) { console.log("onmouseover", d, i); },
                        onmouseout: function (d, i) { console.log("onmouseout", d, i); }
                    },
                    gauge: {
                        label: {

                            //format: function(value, ratio) {
                            //    return value;
                            //},
                            //show: true // to turn off the min/max labels.
                        },
                        min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
                        max: 100, // 100 is default
                        units: ' %',
                        width: this.width1 // for adjusting arc thickness
                    },
                    color: {
                        pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
                        threshold: {
                            //            unit: 'value', // percentage is default
                            //            max: 200, // 100 is default
                            values: [30, 60, 90, 100]
                        }
                    },
                    size: {
                        height: this.height1
                    }
                });
            },

            domReady: function () {

                //this.drawChart();
            },
            gvalueChanged: function (oldValue, newValue) {
                if (newValue && oldValue) {
                    this.drawChart();
                }
            }
        });
    </script>
</polymer-element>